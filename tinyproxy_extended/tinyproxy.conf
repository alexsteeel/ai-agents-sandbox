# Tinyproxy configuration - Whitelist mode
User nobody
Group nogroup
Port 8888
Listen 0.0.0.0
Timeout 600
MaxClients 100
StartServers 10

# Logging
LogLevel Info
# LogFile "/var/log/tinyproxy/tinyproxy.log"

# Security - Whitelist filtering
FilterURLs On
FilterExtended On
FilterCaseSensitive Off
FilterDefaultDeny Yes
Filter "/etc/tinyproxy/filter"

# Headers
ViaProxyName "tinyproxy"
DisableViaHeader No

# Connection handling
ConnectPort 443
ConnectPort 563
ConnectPort 80

# Allow connections from Docker networks
Allow 172.16.0.0/12
Allow 192.168.0.0/16
Allow 10.0.0.0/8
Allow 127.0.0.1

# Upstream proxy support (configured dynamically via environment variables)
# Examples:
# upstream http upstream-proxy.example.com:8080
# upstream socks5 host.docker.internal:8900
# upstream socks4 proxy.example.com:1080