# Docker Registry Proxy Configuration

# ============================================================================
# BASIC CONFIGURATION
# ============================================================================

# Maximum cache size (default: 32g)
# CACHE_MAX_SIZE=32g

# Additional registries to cache (space-separated)
# Default includes: docker.io gcr.io quay.io registry.k8s.io ghcr.io
# ADDITIONAL_REGISTRIES=my.registry.com artifactory.company.com

# Authentication for private registries
# Format: "registry:username:password registry2:user:pass"
# AUTH_REGISTRIES=my.registry.com:user:pass

# Allow push operations (default: false for caching only)
# ALLOW_PUSH=false

# ============================================================================
# UPSTREAM PROXY CONFIGURATION (Optional)
# ============================================================================

# To restrict docker-registry-proxy to only specific registries,
# you can use the tinyproxy-registry service or direct proxy

# Method 1: Direct proxy URL (if you have existing corporate proxy)
# UPSTREAM_PROXY=http://corp-proxy.company.com:8080

# Method 2: Use tinyproxy-registry for filtering
# Enable by running: docker compose --profile registry-filter up -d
# Then set:
# UPSTREAM_PROXY=http://tinyproxy-registry:8888

# Whitelist for registries only (when using tinyproxy-registry)
# REGISTRY_WHITELIST=registry.company.com,artifactory.company.com

# Domains that bypass the upstream proxy
# NO_UPSTREAM=localhost,127.0.0.1,internal.company.com

# ============================================================================
# USAGE EXAMPLES
# ============================================================================

# Example 1: Standard setup (cache all public registries)
# No configuration needed - just run: docker compose up -d

# Example 2: Corporate setup with restricted registries
# REGISTRY_WHITELIST=registry.company.com,docker.io
# docker compose --profile registry-filter up -d
# UPSTREAM_PROXY=http://tinyproxy-registry:8888

# Example 3: Behind existing corporate proxy
# UPSTREAM_PROXY=http://proxy.company.com:8080
# ADDITIONAL_REGISTRIES=registry.company.com