# DevContainer Template

This is a template for creating secure, isolated development environments using AI Agents Sandbox.

## Quick Start

1. **Copy this directory to your project:**
   ```bash
   cp -r /path/to/ai-agents-sandbox/.devcontainer.example /path/to/your-project/.devcontainer
   ```

2. **Initialize the project:**
   ```bash
   cd /path/to/your-project/.devcontainer
   ./init-project.sh  # This creates .env automatically
   ```

3. **Configure environment (optional):**
   ```bash
   # Edit override.user.yaml to add proxy settings, whitelisted domains, etc.
   # See the environment section in override.user.yaml for examples
   
   # Copy and configure secure initialization (optional)
   cp secure.init.sh.template secure.init.sh
   # Add your API keys and credentials to secure.init.sh
   ```

4. **Open in your IDE:**
   - **VS Code:** Open project folder, click "Reopen in Container"
   - **PyCharm:** Settings → Python Interpreter → Docker Compose → devcontainer

## Files

### Core Configuration
- `devcontainer.json` - IDE configuration (VS Code/PyCharm)
- `local.project.yaml` - Project-specific services (empty by default)
- `override.user.yaml` - User customizations and overrides
- `init-project.sh` - Initialization script

### Templates
- `secure.init.sh.template` - Template for sensitive configuration
- `Dockerfile` - Example for extending the base image

### Documentation
- `README.md` - This file
- `CLAUDE.md` - Detailed technical documentation

### Git Ignored
- `.env` - Local environment (auto-generated by init script)
- `secure.init.sh` - Sensitive configuration (if created)

## Customization

### Add Services
Edit `local.project.yaml`:
```yaml
services:
  postgres:
    image: postgres:15
    environment:
      POSTGRES_PASSWORD: dev
    networks:
      - claude-internal
```

### Add Whitelisted Domains
Edit `override.user.yaml`:
```yaml
services:
  tinyproxy-devcontainer:
    environment:
      USER_WHITELIST_DOMAINS: api.myservice.com,cdn.myservice.com
```

### Extend Base Image
1. Edit `override.user.yaml`:
   ```yaml
   services:
     devcontainer:
       build:
         context: .
         dockerfile: Dockerfile
   ```

2. Edit `Dockerfile`:
   ```dockerfile
   FROM ai-agents-sandbox/devcontainer:latest
   USER claude
   # Add your tools
   RUN pip install --user poetry
   ```

## Security

⚠️ **Important Security Rules:**
- Keep services on `claude-internal` network
- Never add sudo or root access
- Use proxy for all internet access
- Store secrets in `.env` or `secure.init.sh`
- Never commit sensitive files

## Troubleshooting

### Permission Issues
```bash
./init-project.sh
```

### Network Issues
```bash
docker exec devcontainer /home/claude/scripts/test-network.sh
```

### Container Won't Start
```bash
docker compose logs devcontainer
docker compose logs tinyproxy-devcontainer
```

## Support

See the main [AI Agents Sandbox README](https://github.com/alexsteeel/ai-agents-sandbox) for:
- Full documentation
- Architecture details
- Advanced configuration
- Troubleshooting guides